## 函数知识梳理 第二部分

### 四 常用函数

#### 字符串
> 字符串常用： 8.1.4(e) P315

- **length** – finding the number of characters in the string. For example, the length of the string `"Computer Science"` is 16 characters as spaces are 
counted as a character.
- **substring** – extracting part of a string. For example, the substring `"Science"` could be extracted from `"Computer Science"`.
- **upper** – converting all the letters in a string to uppercase. For example, the string `"Computer Science"` would become `"COMPUTER SCIENCE"`.
- **lower** – converting all the letters in a string to lowercase. For example, the string `"Computer Science"` would become `"computer science"`.

对应伪代码
```txt
LENGTH("Computer Science")
LENGTH(MyString)

SUBSTRING("Computer Science", 10, 7)
SUBSTRING(MyString, 10, 7)

UCASE("Computer Science")
UCASE(MyString)

LCASE("Computer Science")
LCASE(MyString)
```

对应python代码
```txt
len("Computer Science")
len(MyString)

"Computer Science"[9:16]
MyString[9:16]

"Computer Science".upper()
MyString.upper()

"Computer Science".lower()
MyString.lower()
```

#### 文件读写
> 文件读写基础 8.3 P345

```txt
DECLARE TextLine : STRING // variables are declared as normal
DECLARE MyFile : STRING
MyFile ← "MyText.txt"

// writing the line of text to the file
OPEN MyFile FOR WRITE // opens file for writing
    OUTPUT "Please enter a line of text"
    INPUT TextLine
    WRITEFILE, TextLine // writes a line of text to the file
CLOSEFILE(MyFile) // closes the file

// reading the line of text from the file
OUTPUT "The file contains this line of text:"
OPEN MyFile FOR READ // opens file for reading
    READFILE, TextLine // reads a line of text from the file
    OUTPUT TextLine
CLOSEFILE(MyFile) // closes the file
```
对应python
```python
# writing to and reading a line of text from a file
MyFile = open ("MyText.txt","w")
TextLine = input("Please enter a line of text ")
MyFile.write(TextLine) 
Myfile.close()

print("The file contains this line of text")
MyFile = open ("MyText.txt","r")
TextLine = MyFile.read()
print(TextLine)
Myfile.close()
```

**核心伪代码**
写
```
OPEN MyFile FOR WRITE
    WRITEFILE, SomeThing
CLOSEFILE(MyFile)
```
读取
```
OPEN MyFile FOR READ
    READFILE, TextLine
CLOSEFILE(MyFile)
```


### 五 练习
#### 简单例题
**2023 s21 8**
a) One mark per mark point, max three
- Storing string in Phrase
- Correct use of LENGTH function
- Correct use of UCASE function
- Correct outputs of LENGTH and UCASE

For example:

**Phrase ← "The beginning is the most important part"
OUTPUT LENGTH(Phrase)
OUTPUT UCASE(Phrase)**

b) One mark for each correct line, max two

**40
THE BEGINNING IS THE MOST IMPORTANT PART**

**2023 s23 9**
a) **DECLARE Saying : STRING**

b) One mark per mark point, max five
MP1 input a string into Saying
MP2 correct use of OPENFILE to write data
MP3 correct use of WRITEFILE to write Saying
MP4 correct use of CLOSEFILE
MP5 correct use of filename Quotations.txt throughout

For example:
```
INPUT Saying
OPENFILE "Quotations.txt" FOR WRITE
    WRITEFILE "Quotations.txt", Saying
CLOSEFILE "Quotations.txt"
```

**2023 m22 10**
a) 
One mark for each correct line
**DECLARE X : INTEGER
DECLARE Y : REAL
DECLARE Z : BOOLEAN**

b) 
One mark for using FUNCTION and ENDFUNCTION and RETURNS BOOLEAN
One mark for naming the function Same
One mark for defining the two parameters correctly
One mark for comparing the two parameters using ROUND
One mark for correctly returning TRUE and FALSE
One mark for correct function call

Example definition:
```txt
FUNCTION Same(A : INTEGER, B : REAL) RETURNS BOOLEAN
    IF A = ROUND(B,0)
      THEN
        RETURN TRUE
      ELSE
        RETURN FALSE
    ENDIF
ENDFUNCTION
```

Example call:
**Z ← Same(X,Y)**

c) 
A function is defined once and called many times or
Define – setting up the function and call is using a function 

**2023 s22 11**
a) 
One mark for any two correct lines
**DECLARE P : STRING
P ← "The world"
DECLARE Q : CHAR
Q ← 'W'**

b) 
One mark for each point (max four)
- converting `P` to upper case
- finding the length of `P`
- using a loop to check for position of `Q`
- using the string operation substring
- storing the loop counter in `Position` if the value is found

For example:
```
P ← UCASE(P)
Counter ← 1
Position ← 0
REPEAT
    IF SUBSTRING(P, Counter, 1) = Q
      THEN
        Position ← Counter
    ENDIF
    Counter ← Counter + 1
UNTIL Position <> 0 OR Counter = LENGTH(P) 
```

c) 5

#### 大题演示
> 2015 s21 1

#### 大题实践
> 2023 s22 12